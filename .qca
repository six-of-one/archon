#!/bin/bash

# Cataboligne - 10.23.11 archon compile
#		7.29.13 - indicate when compile fails, have to move progs.dat first

# QCC="fqcc /O2"

QCC="fteqcc"

if [[ "$1" == "0" ]]; then QCC="fqcc0"; echo;echo Using qcc 0;echo;shift;fi

if [[  "$1" != "-?" && "$1" != "-h" && "$1" != "-help" && -f "./progs.dat" ]]; then 'mv' -f "./progs.dat" "/tmp"; echo; echo "           *** moved existing progs.dat to /tmp!";echo; fi

# frikqcc compiler, rename to your flavor
# -warn [1-4] to set warning level, 3 is good for discovering things

($QCC "$@")

# see if we got a new file


if [[ "$1" != "-?" && "$1" != "-h" && "$1" != "-help" && ! -f "./progs.dat" ]]; then echo;echo "           *** WARNING ***";echo;echo "           progs.dat not created, possible compile failure!";echo;echo;fi

# move to prog dir
# mprg painkeep

# does this - duplicate for your install
# 'cp' ./progs.dat /home/Quake/quake/painkeep

# put 'er in all the arc locations
cp progs.dat /home/Quake/quake_0/archon
cp progs.dat /home/Quake/qlnx/Resource/mods/_archon_a1_rel
